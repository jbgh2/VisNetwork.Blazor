@page "/dot-parsing"

@using VisNetwork.Blazor.Models

<h1>VisNetwork Samples</h1>

<div>
    <Network @ref="network" Id="my-id" Data="@data" class="vis-network-container" SetupCompletedCallback="NetworkReady"/>
</div>

@code {

    private Network network;

    private NetworkData data;


    protected override void OnInitialized()
    {
        var nodes = new List<Node>();
        var edges = new List<Edge>();

        nodes.Add(new Node("1", "Node 1", 1, "circle"));
        nodes.Add(new Node("2", "Node 2", 2, "ellipse"));
        edges.Add(new Edge("1", "2") { Arrows = new Arrows { To = new ArrowsOptions { Enabled = true } } });

        nodes.Add(new Node("3", "Node 3", 4, "database"));
        edges.Add(new Edge("2", "3") { Arrows = new Arrows { To = new ArrowsOptions { Enabled = true } } });

        data = new NetworkData
        {
            Edges = edges,
            Nodes = nodes
        };
    }

    private async Task NetworkReady()
    {
        var dotString = "dinetwork {1 -> 1 -> 2; 2 -> 3; 2 -- 4; 2 -> 1 }";
        Console.WriteLine($"Parsed network: Before: {dotString}");
        var parsedNetwork = await network.ParseDOTNetwork(dotString);
        Console.WriteLine($"Parsed network: After: {parsedNetwork}");
    }

}